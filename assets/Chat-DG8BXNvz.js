import{u as R,r as a,j as e,A as E}from"./index-DFG6z3NI.js";import{V as I,C as w,M as z}from"./VoiceModal-Cb4ztn3X.js";import{m as r}from"./proxy-LNrxXqsq.js";import{P as M}from"./plus-CP7HHIsp.js";const y=[{id:"manager",label:"Circle Manager",description:"Full access to manage circle"},{id:"viewer",label:"Viewer",description:"View-only access"},{id:"editor",label:"Editor",description:"Can edit and contribute"},{id:"contributor",label:"Contributor",description:"Can add transactions"}];function O(){const N=R(),h=a.useRef(null),f=a.useRef(null),[i,n]=a.useState("idle"),[p,m]=a.useState([]),[g,b]=a.useState(""),[o,C]=a.useState([]),[c,u]=a.useState(!1),[d,x]=a.useState("listening"),[k,v]=a.useState(""),A=()=>{f.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{A()},[p,i]),a.useEffect(()=>{const t=setTimeout(()=>{h.current?.focus()},300);return()=>clearTimeout(t)},[]),a.useEffect(()=>{if(i==="userTyping"){const t=setTimeout(()=>{m(s=>[...s,{id:Date.now(),type:"user",text:"I want to add Ahmed, my dad to my circle"}]),b(""),n("aiResponding")},800);return()=>clearTimeout(t)}if(i==="aiResponding"){const t=setTimeout(()=>{m(s=>[...s,{id:Date.now(),type:"ai",text:"Ok, what's the role you want to assign to",inlineAvatar:{image:"ahmed.png",name:"Ahmed"}}]),n("roleSelection")},1200);return()=>clearTimeout(t)}if(i==="animatingAvatar"){const t=setTimeout(()=>{m(s=>[...s,{id:Date.now(),type:"ai",text:"Added Dad to the circle",showAvatarGroup:!0}]),n("confirmed")},1500);return()=>clearTimeout(t)}if(i==="confirmed"){const t=setTimeout(()=>{m(s=>[...s,{id:Date.now(),type:"ai",text:"Is there anything else I can do for you today?"}]),n("followUp")},1e3);return()=>clearTimeout(t)}},[i]),a.useEffect(()=>{if(c&&d==="listening"){const t=setTimeout(()=>{x("confirming")},3500);return()=>clearTimeout(t)}},[c,d]),a.useEffect(()=>{if(c&&d==="listening"){const t="Add Ahmed my dad to my household bills circle...";let s="",l=0;const j=setInterval(()=>{l<t.length?(s+=t[l],v(s),l++):clearInterval(j)},50);return()=>clearTimeout(j)}else c||(v(""),x("listening"))},[c,d]);const T=()=>{i==="idle"&&g.trim()&&n("userTyping")},F=()=>{u(!0),x("listening")},$=()=>{x("success"),setTimeout(()=>{u(!1),n("userTyping")},2e3)},S=t=>{C(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},V=()=>{o.length>0&&n("confirmationCard")},D=()=>{n("animatingAvatar")};return e.jsxs(e.Fragment,{children:[e.jsx(I,{isActive:c,stage:d,transcript:k,onClose:()=>u(!1),onConfirm:$}),e.jsx("div",{className:"min-h-screen text-[#060928] font-sans flex flex-col",style:{background:c?"linear-gradient(180deg, #5d1a4d 0%, #2d1a4d 100%)":"linear-gradient(180deg, #5d1a4d 0%, rgba(255,255,255,0.9) 25%, rgba(255,255,255,1) 40%)"},children:e.jsxs(r.div,{className:"flex flex-col h-screen",children:[e.jsx("div",{className:"px-6 pt-[calc(env(safe-area-inset-top)+20px)] pb-4",children:e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N("/"),className:"w-10 h-10 rounded-full overflow-hidden border-2 border-white/20 shadow-md",children:e.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:"url(/investbank/assets/omar.png)"}})}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"Hi Omar"})]})})}),e.jsxs("div",{className:"flex-1 px-6 pb-6 overflow-y-auto space-y-4",children:[e.jsx(E,{children:p.map(t=>e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${t.type==="user"?"justify-end":"justify-start"} gap-3`,children:[t.type==="ai"&&t.avatar&&e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-white shadow-md flex-shrink-0",children:e.jsx("img",{src:`/investbank/assets/${t.avatar}`,className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:`max-w-[75%] rounded-3xl px-6 py-4 ${t.type==="user"?"bg-[#060928] text-white":"bg-white text-[#060928] shadow-md"}`,children:[t.inlineAvatar?e.jsxs("p",{className:"text-[15px] font-medium",children:[t.text," ",e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-[#F5F5F7] px-2 py-1 rounded-full border border-gray-100 align-middle",children:[e.jsx("span",{className:"inline-block w-5 h-5 rounded-full overflow-hidden flex-shrink-0 align-middle",children:e.jsx("img",{src:`/investbank/assets/${t.inlineAvatar.image}`,className:"w-full h-full object-cover",alt:""})}),e.jsx("span",{className:"text-xs font-bold text-[#060928] whitespace-nowrap",children:t.inlineAvatar.name})]}),"?"]}):e.jsx("p",{className:"text-[15px] font-medium mb-4",children:t.text}),t.showAvatarGroup&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs("div",{className:"flex -space-x-4",children:[["Amal.png","zyed.png","omar.png"].map((s,l)=>e.jsx(r.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"w-14 h-14 rounded-full border-4 border-white shadow-xl overflow-hidden ring-1 ring-gray-100",children:e.jsx("img",{src:`/investbank/assets/${s}`,className:"w-full h-full object-cover",alt:""})},l)),e.jsx(r.div,{initial:{opacity:0,x:-30,scale:.5},animate:{opacity:1,x:0,scale:1},transition:{delay:.3},className:"w-14 h-14 rounded-full border-4 border-white shadow-xl overflow-hidden ring-1 ring-gray-100 relative z-20",children:e.jsx("img",{src:"/investbank/assets/ahmed.png",className:"w-full h-full object-cover",alt:""})})]})})]})]},t.id))}),i==="roleSelection"&&e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-3",children:[y.map(t=>e.jsxs(r.button,{onClick:()=>S(t.id),className:`w-full bg-white rounded-2xl p-4 shadow-md flex items-center justify-between transition-all ${o.includes(t.id)?"ring-2 ring-[#D40C52]":""}`,children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[#060928] font-bold text-[15px]",children:t.label}),e.jsx("p",{className:"text-gray-400 text-xs",children:t.description})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${o.includes(t.id)?"bg-[#D40C52] border-[#D40C52]":"border-gray-300"}`,children:o.includes(t.id)&&e.jsx(w,{size:14,className:"text-white",strokeWidth:3})})]},t.id)),o.length>0&&e.jsx(r.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:V,className:"w-full bg-[#060928] text-white rounded-full py-4 font-bold text-[15px] shadow-lg active:scale-95 transition-transform",children:"Continue"})]}),i==="confirmationCard"&&e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full bg-white rounded-[32px] p-6 shadow-xl",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6 text-[14px]",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Add"}),e.jsxs("div",{className:"flex items-center gap-2 bg-[#F5F5F7] px-2.5 py-1.5 rounded-full border border-gray-100",children:[e.jsx("div",{className:"w-5 h-5 rounded-full overflow-hidden",children:e.jsx("img",{src:"/investbank/assets/ahmed.png",alt:"",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"text-xs font-bold text-[#060928]",children:"Ahmed"})]}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsxs("div",{className:"bg-[#D40C52] text-white px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-1.5",children:[e.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-white/20 overflow-hidden",children:e.jsx("img",{src:"/investbank/assets/Amal.png",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-white/20 overflow-hidden",children:e.jsx("img",{src:"/investbank/assets/zyed.png",className:"w-full h-full object-cover"})})]}),"My Family Circle"]})]}),e.jsx("div",{className:"bg-[#F5F5F7] rounded-[24px] p-5 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-white shadow-md overflow-hidden bg-cover bg-center",style:{backgroundImage:"url(/investbank/assets/ahmed.png)"}}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[#060928] font-bold text-lg",children:"Ahmed Al-Hassan"}),e.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"Account number"}),e.jsx("p",{className:"text-[#060928] font-bold text-sm",children:"543816102001"})]})]})}),e.jsxs("div",{className:"bg-[#F5F5F7] rounded-[20px] p-4 mb-6",children:[e.jsx("p",{className:"text-gray-400 text-xs font-medium mb-3",children:"Permissions"}),e.jsx("div",{className:"space-y-2",children:o.map(t=>{const s=y.find(l=>l.id===t);return s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[#D40C52] flex items-center justify-center",children:e.jsx(w,{size:12,className:"text-white",strokeWidth:3})}),e.jsx("span",{className:"text-[#060928] font-bold text-sm",children:s.label})]},t):null})})]}),e.jsx("button",{onClick:D,className:"w-full bg-[#060928] text-white rounded-full py-4 font-bold text-[15px] shadow-lg active:scale-95 transition-transform",children:"Confirm"})]}),e.jsx("div",{ref:f})]}),(i==="idle"||i==="followUp")&&e.jsx("div",{className:"px-6 pb-[calc(env(safe-area-inset-bottom)+20px)]",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:h,type:"text",value:g,onChange:t=>b(t.target.value),onKeyDown:t=>t.key==="Enter"&&T(),placeholder:"How can I help you today?",className:"w-full bg-[#F5F5F7] text-gray-800 placeholder-gray-400 rounded-full px-6 py-3.5 pr-24 text-[15px] border-none focus:outline-none focus:ring-1 focus:ring-purple-200"}),e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("button",{className:"w-9 h-9 rounded-full bg-[#060928] flex items-center justify-center shadow-lg active:scale-95 transition-transform",children:e.jsx(M,{size:20,className:"text-white",strokeWidth:3})}),e.jsx("button",{onClick:F,className:"w-9 h-9 flex items-center justify-center active:scale-95 transition-transform",children:e.jsx(z,{size:20,className:"text-[#060928]",strokeWidth:2.5})})]})]})})]},"normal-chat")})]})}export{O as default};
